<h2>點餐號碼： <%= @order.id %> | 取餐地點： <%= @order.location.name %></h2>

<%= simple_form_for(setup_order(@order), url: order_path, method: :patch) do |f| %>
  <%#= f.input :location_id, as: :select, collection: Location.all, value: :id,:include_blank => false %>
  <%= f.input :description, html: { rows: 7 } %>
  <%= f.submit '預覽訂單', class:'btn btn-primary' %>
<% end %> <!-- simple_form end -->

<table class="table">
  <thead>
    <tr>
      <th> Restaurant </th>
      <th> Food Name </th>
      <th> Quantity </th>
      <th></th>
    </tr>
  </thead>
  
  <tbody>
    <% @fooditem = @order.fooditems.new %>
    <%= simple_form_for(@fooditem, url: fooditems_path(params[:fooditem]), method: :post, remote: true) do |q| %>
      <tr>
        <td><%= q.input :restaurant_id, as: :select, collection: Restaurant.all, label: false, :include_blank => '選擇餐廳' %></td>
        <!-- TODO: display name -->
        <td><%= q.input :food_id, as: :select, collection: Food.all, label: false, :include_blank => '選擇餐點' %></td>
        <td><%= q.input :quantity, label: false %></td>
        <td>
          <% if q.object.persisted? %>
            <%= q.check_box :_destroy %>
            <%= q.label :_destroy, "Destroy" %>
          <% end %>
        </td>
        <td>
          <%= q.submit 'Sure' %>
        </td>
      </tr>
    <% end %>
    <tr id="fooditem-form" style="display:none;"></tr>
    <tr id="fooditems"></tr>
    <tr><%= link_to 'New Item', new_fooditem_path(order_id: @order.id), remote: true %></tr>
  </tbody>
</table>
